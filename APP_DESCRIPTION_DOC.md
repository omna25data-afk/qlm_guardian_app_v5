# توثيق المواصفات الوظيفية والشاشات (بناءً على ملف الوصف)

هذا الملف يوثق الهيكل الوظيفي والشاشات المقترحة لتطبيق "إدارة قلم التوثيق" بناءً على ملف الوصف الشامل.

---

## نظرة عامة على النظام

نظام ذكي لإدارة قلم التوثيق، يربط بين **رئيس قلم التوثيق** (المدير) و **الأمناء الشرعيين**. يهدف إلى أتمتة عمليات التوثيق، إدارة السجلات، متابعة التراخيص، وإصدار التقارير والإحصائيات.

**المستخدمون:**

1. **رئيس قلم التوثيق (Admin):** صلاحيات كاملة للإدارة والتوثيق والرقابة.
2. **الأمين الشرعي (Guardian):** صلاحيات محدودة لتحرير العقود، إدارة سجلاته، ورفع القيود للتوثيق.

---

## أولاً: واجهة رئيس قلم التوثيق (Admin Interface)

### 1. الشريط العلوي (Top Bar)

- رسالة ترحيب (الاسم + الصفة).
- أيقونة الإشعارات.
- القائمة الشخصية (تظهر عند النقر على الصورة):
  - الملف الشخصي.
  - الإعدادات (الأمان، التخصيص، إدارة المستخدمين، النسخ الاحتياطي).
  - الوضع الداكن/الفاتح.
  - تسجيل الخروج.

### 2. القوائم السفلية (Bottom Navigation)

يحتوي التطبيق على 5 قوائم رئيسية:

#### أ. الرئيسية (Dashboard)

لوحة تحكم تفاعلية تحتوي على:

- **ملخص شامل:** رسوم بيانية تفاعلية لحالة النظام.
- **بطاقات الأمناء:** (إجمالي الأمناء، على رأس العمل، موقوفين، متواجدون).
- **بطاقات التراخيص:** (إجمالي، سارية، تنتهي قريباً، منتهية).
- **بطاقات البطائق الإلكترونية:** (إجمالي، سارية، تنتهي قريباً، منتهية).
- **الإجراءات العاجلة:** تنبيهات (تجديد تراخيص، مهام معلقة).
- **سجلات العمليات (Logs):** آخر عمليات المدير وآخر عمليات الأمناء.

#### ب. الأمناء (Guardians Management)

لإدارة بيانات وشؤون الأمناء.

- **قائمة الأمناء:** عرض بطاقات الأمناء مع مؤشرات حالة (نشط/موقوف) وحالة الترخيص والبطاقة (ألوان تفاعلية).
- **تجديد التراخيص:** إدارة تجديدات التراخيص (إضافة حتى 30 تجديد، طباعة سندات).
- **تجديد البطائق:** إدارة تجديدات البطائق الإلكترونية.
- **المهام:** توكيل مهام للأمناء ومتابعة إنجازها.
- **أدوات العرض:** فرز وتصفية متقدمة، بحث فوري.

#### ج. السجلات والقيود (Records & Entries)

القسم المركزي لإدارة الوثائق. يحتوي على 3 تبويبات علوية:

1. **السجلات (Records):**
    - إدارة دفاتر السجلات (إضافة، تعديل، تخصيص).
    - تصنيف السجلات: (سجلاتي، سجلات الأمناء، سجلات أخرى).
    - أنواع السجلات المدعومة:
        - الوكالات.
        - الزواج.
        - المبيع (منقول/غير منقول).
        - التصرفات (إقرار، تنازل، إجارة، إلخ).
        - القسمة.
        - الطلاق.
        - الرجعة.
    - أدوات السجل: تخصيص الحقول، إضافة أنواع عقود فرعية.

2. **القيود (Entries):**
    - عرض جميع القيود (الموثقة، بانتظار التوثيق، المسلمة).
    - **عملية التوثيق:** واجهة لتوثيق العقود المرفوعة من الأمناء (مراجعة البيانات، إضافة بيانات القلم، البيانات المالية).
    - البحث المتقدم (باسم الطرف، رقم الوثيقة، رقم السجل).

3. **تخصيص (Customization):**
    - تخصيص السجلات والقيود (إضافة حقول، تعديل مسميات).
    - **تخصيص الرسوم:** ضبط معادلات حساب الرسوم، الدعم، الغرامات، والضرائب لكل نوع عقد.

#### د. التقارير والإحصائيات (Reports & Stats)

- **الإحصائيات:** لوحات بيانية تفاعلية شاملة.
- **التقارير:** منشئ تقارير متقدم (اختيار الأعمدة، التصفية، التصدير PDF/Excel).
- **نماذج مخصصة:** تقارير ربع سنوية، نصف سنوية، وسنوية.

#### هـ. المساعد والأرشيف (Assistant & Archive)

- **أدوات المساعد:**
  - أداة التواصل (مع الأمناء).
  - التعاميم والقرارات.
  - القائمة السوداء (للأشخاص المحظورين).
  - نماذج ومطبوعات (سجلات، مذكرات، غلافات).
  - **الحاسبات:** (المواريث، الضرائب، الزكاة، المساحة، العمر).
  - **التحويلات:** (التاريخ، القياسات، العملات).
  - **الخارطة التفاعلية:** توزيع الأمناء جغرافياً (عزلة/قرية) على الخريطة.
- **الأرشيف:** أرشيف إلكتروني متقدم للوثائق والملفات.

---

## ثانياً: واجهة الأمين الشرعي (Guardian Interface)

### 1. الشريط العلوي

مشابه لرئيس القلم ولكن بصلاحيات محدودة.

### 2. القوائم السفلية

#### أ. الرئيسية (Dashboard)

ملخص لأعمال الأمين، إحصائيات شخصية، تنبيهات (تجديد رخصته/بطاقته)، ورسائل من رئيس القلم.

#### ب. السجلات والقيود

- عرض سجلاته الخاصة فقط.
- إدارة العقود التي حررها.

#### ج. إضافة قيد (Add Entry) - زر مركزي (+)

واجهة لإضافة عقد جديد بخطوات متسلسلة حسب نوع العقد:

1. **اختيار نوع العقد:** (وكالة، زواج، بيع، تصرف، قسمة، طلاق، رجعة).
2. **تعبئة بيانات العقد:** (الأطراف، الشهود، المحتوى، التاريخ).
3. **حالة الوثيقة:**
    - *خيار أ:* محفوظة للتوثيق (توقيع اللأمين -> إرسال لرئيس القلم).
    - *خيار ب:* مُسلمة لصاحب الشأن (إرفاق محضر التسليم -> أرشفتها).

#### د. التقارير (My Reports)

تقارير إحصائية عن أعماله وإنجازاته.

#### هـ. أدواتي وأرشيفي

- الوصول للحاسبات والتحويلات.
- أرشيفه الخاص.

---

## تفاصيل أنواع السجلات والبيانات المالية

### البيانات المالية (آلية الحساب)

النظام يقوم بحساب المبالغ تلقائياً بناءً على الإعدادات:

- **الرسوم:** مبلغ ثابت أو نسبة (حسب العقد) توزع (80% إيراد، 5% حافز، 15% محاكم).
- **الدعم:** 25% من الرسوم (12.5% قضاء، 12.5% توثيق).
- **الاستدامة:** مبلغ ثابت (200 ريال).
- **الغرامات:** تحتسب بناءً على مدة التأخير في التوثيق (شروط زمنية).
- **الضرائب والزكاة:** نسب محددة خاصة بعقود المبيع والتصرفات.

### أنواع العقود وتفاصيلها الرئيسية

1. **الوكالات:** (موكل، وكيل، بيانات الوكالة).
2. **الزواج:** (زوج، زوجة، عمر الزوجة، المهر).
3. **المبيع:**
    - *منقول:* (نوع، رقم، موديل..).
    - *غير منقول:* (موضع، مساحة، حدود..).
4. **التصرفات:** (إقرار، تنازل، إجارة، إلخ..).
5. **القسمة:** (مورث، ورثة، تفاصيل التركة).
6. **الطلاق/الرجعة:** (زوج، زوجة، بيانات الإشهاد).

---

## مميزات إضافية (Non-Functional Reqs)

- **العمل دون إنترنت (Offline Mode):** التسجيل والمزامنة لاحقاً.
- **المزامنة السحابية:** والنسخ الاحتياطي (Google Drive / Local).
- **التصدير والاستيراد:** Excel, PDF.
- **التصميم:** واجهات عصرية (Material Design)، قوائم سفلية، وضع ليلي.
