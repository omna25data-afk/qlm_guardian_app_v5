---
title: مزودي نماذج اللغة المخصصة (شرح الملف)
description: >
  كيفية بناء واستخدام مزودي نماذج لغة (LLM Providers) مخصصين للاندماج مع مكونات Flutter.
---

يتم التعبير عن البروتوكول الذي يربط بين النموذج اللغوي (LLM) ومكون `LlmChatView` عبر واجهة (Interface) تُدعى `LlmProvider`. يمكن أن يكون الـ LLM محلياً أو سحابياً (مثل GCP أو غيره)، ويمكن أن يكون مغلق المصدر أو مفتوح المصدر.
يأتي AI Toolkit مع مزودين جاهزين: `FirebaseProvider` و `EchoProvider`.

## بناء مزود مخصص (Implementation)

لإنشاء مزودك الخاص، يجب أن تنفذ واجهة `LlmProvider` مع مراعاة أربعة أمور رئيسية:

1. **الإعدادات والتكوين (Configuration):**
   يجب أن يسمح المزود للمستخدم بتمرير وضبط النموذج الأساسي كمعامل (Parameter) لضمان مرونة التكوين، كما هو الحال في `FirebaseProvider`.

2. **التاريخ والسجل (History):**
   إدارة السجل تمثل جزءاً كبيراً، حيث يجب إبلاغ المستمعين (Listeners) عند إضافة أو تعديل رسائل باستخدام `ChangeNotifier`، وإنشاء محادثة جديدة عند تغيير السجل لتحديث الواجهة.

3. **الرسائل والمرفقات (Messages and attachments):**
   يجب ترجمة الرسائل القياسية الخاصة بالمكتبة (من نوع `ChatMessage`) والمرفقات (حسب أنواعها) إلى التنسيق الذي يتوقعه الـ LLM المعني الأساسي. يقدم الملف كوداً يوضح كيفية التحويل.

4. **استدعاء النموذج (Calling the LLM):**
   عند كتابة تنفيذ الدالتين `generateStream` و `sendMessageStream`، تعتمد الطريقة على البروتوكول الذي يقدمه الـ LLM. يتم إرفاق الردود القادمة من النموذج كبث (Stream) وتنبيه المستمعين لتحديث واجهة المستخدم بالتدريج.

## أمثلة

يُعتبر `FirebaseProvider` نقطة بداية ممتازة لتعلم كيفية دمج النماذج، كما يُعد `EchoProvider` تطبيقاً بسيطاً يقوم بإرجاع طلب المستخدم كنص Markdown كتمثيل أساسي للآلية بدون استدعاء خدمة فعلية.
