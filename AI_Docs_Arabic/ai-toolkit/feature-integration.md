---
title: دمج الميزات (شرح الملف)
description: >
  كيفية دمج ميزات وأدوات AI Toolkit مع مكونات Flutter الأخرى وتخصيص تجربة المحادثة.
---

إلى جانب الميزات التلقائية في واجهة المحادثة (`LlmChatView`)، هنالك العديد من نقاط التكامل (Integration points) التي تتيح تخصيص الميزات للعمل بسلاسة داخل تطبيقك.

## الميزات القابلة للتخصيص

* **رسائل الترحيب (Welcome messages):**
  عرض رسالة ترحيبية تحدد سياق المحادثة عبر تمرير النص للمعامل `welcomeMessage`.
* **الرسائل المقترحة (Suggested prompts):**
  تقديم قائمة نصوص مقترحة تظهر للمستخدم قبل بدء أي محادثة (عبر معامل `suggestions`) لتوجيهه.
* **تعليمات النظام (System instructions):**
  تزويد الـ LLM بتعليمات وسياق خفي (خلف الكواليس) لضبط سلوكه (مثل جعله يرد كطاهٍ يقدم وصفات، ومع أخذ تفضيلات المستخدم بالاعتبار).
* **تعطيل المرفقات والصوت:**
  يمكن إخفاء وإلغاء زر المرفقات وزر المايكروفون عبر تعيين `enableAttachments` و `enableVoiceNotes` إلى `false`.
* **التحويل الصوتي المخصص (Custom speech-to-text):**
  استخدام خدمة مخصصة لتحويل الصوت إلى نص بدلاً من الخدمة الافتراضية عبر واجهة `SpeechToText`.
* **إدارة سلوك الإلغاء أو الأخطاء:**
  تخصيص ردود الفعل والرسائل التي تظهر عند إلغاء الطلب (Cancel) أو حدوث أخطاء مثل انقطاع الاتصال (عبر `cancelMessage` و `errorMessage`).
* **إدارة السجل (Manage history):**
  يمكنك جلب أو تفريغ أو تغيير سجل المحادثة مباشرة في المزود (Provider) وإعادة ربطه بواجهة التطبيق بسلاسة (مثلاً عند تعديل تفضيلات المستخدم أثناء المحادثة).
* **حفظ واسترجاع المحادثات (Chat serialization/deserialization):**
  حفظ المحادثات محلياً كملفات JSON عبر تحويل سجل `ChatMessage` واستعادتها في الجلسات اللاحقة.
* **مكونات ردود مخصصة (Custom response widgets):**
  تجاوز عرض نصوص Markdown الافتراضية، وبناء عناصر واجهة (Widgets) متفاعلة عند ورود بيانات محددة من الـ LLM (كمثال: بناء ويدجت "وصفة طعام" مع زر "إضافة للقائمة" باستخدام أوضاع تنسيق JSON).
* **تنسيق مرئي مخصص (Custom styling):**
  إمكانية تغيير وتخصيص ألوان وأشكال المحادثة وخلفياتها بالكامل لدمجها مع هوية التطبيق (عبر الصنف `LlmChatViewStyle`).
* **الدردشة بدون واجهة مستخدم (Chat without UI):**
  استدعاء الـ Provider والتواصل مع الـ LLM بالخلفية دون إظهارها في شاشة المحادثة (استخدام الواجهة البرمجية مباشرة لتنفيذ أوامر صامتة).
* **إعادة توجيه الرسائل (Rerouting prompts):**
  تتبع (Logging)، تصحيح (Debugging)، أو التدخل بين مكونات واجهة المحادثة والنموذج لإعادة التوجيه الديناميكي (باستخدام `messageSender`).
