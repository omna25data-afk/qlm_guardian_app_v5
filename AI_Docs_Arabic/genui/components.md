---
title: المكونات والمفاهيم الأساسية لحزمة GenUI SDK (شرح الملف)
description: >
  تعرف على المكونات والمفاهيم الأساسية لحزمة GenUI SDK في Flutter.
---

يشرح الملف المكونات التقنية الأساسية لحزمة `genui`، وكيف تدير هذه المكونات دورة التفاعل الشاملة:

## المكونات الأساسية (Main Components)

* **`GenUiConversation`:** الواجهة الأساسية ونقطة الدخول الرئيسية، تدير المعالج والمُنشئ وسجل المحادثة وتُنسق العملية بأكملها.
* **`Catalog`:** مجموعة متضمنة لكائنات `CatalogItem` التي تُعرف ما هي واجهات الـ UI (الـ Widgets) المتاحة للذكاء الاصطناعي ليستخدمها، حيث يمتلك كل `CatalogItem` اسماً، ومخططاً للبيانات (Schema)، ودالة بناء للـ Widget.
* **`DataModel`:** مخزن مركزي يمكن مراقبته لجميع حالات واجهة المستخدم المتغيرة (State). تترابط (Bind) المكونات (Widgets) مع هذا المخزن لتتحدث بصرياً عند تغير بياناتها فقط.
* **`ContentGenerator`:** واجهة تواصل مع النموذج الذكي لإرسال واستلام البيانات والرسائل كسلسلة أحداث (Streams).
* **`A2uiMessage`:** هي الرسالة الواردة من الذكاء الاصطناعي تأمر واجهة المستخدم باتخاذ إجراء (مثل عرض مكون، تحديث بيانات، أو مسح مكون).
* **`A2uiMessageProcessor`:** يتكفل بمعالجة الـ `A2uiMessage` وإدارة الـ `DataModel` وحالة واجهة المستخدم.

## كيف تعمل الحزمة؟ (How it works)

يدير مكون الكود `GenUiConversation` حلقة التفاعل:

1. إدخال المستخدم: استلام سؤال من المستخدم عبر النص (`sendRequest`).
2. استدعاء وكيل الـ AI: يتم الجمع بين السؤال والسجل وسؤال المولد `ContentGenerator`.
3. الرد: بناءً على أدوات ومخططات المكونات (`Catalog`) المتاحة، يرسل النموذج رده.
4. معالجة البث (Stream handling): ينشر المولد رسائل `A2uiMessages`.
5. تحديث حالة الـ UI: يعالج `A2uiMessageProcessor` هذه المهام لتحديث البيانات في `DataModel`.
6. بناء الـ UI: أي مكون يتابع واجهة معينة (مثل `GenUiSurface`) يتم إعادة بنائه أتوماتيكياً حال ورود بياناته عبر التخزين المركزي.
7. تفاعل المستخدم: بمجرد ظهور الواجهات البصرية المستحدثة وتفاعل المستخدم معها، يتم حجز الأحداث وتغذيتها في سجل المحادثة لدائرة متجددة مع الـ AI.
