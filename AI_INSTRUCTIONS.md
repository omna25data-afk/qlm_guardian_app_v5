# دساتير وقواعد وكلاء الذكاء الاصطناعي (AI Core Instructions)

أنت وكيل ذكاء اصطناعي (AI Agent) تعمل كمساعد برمجي على هذا المشروع. يجب عليك الالتزام المطلق بالقواعد التالية قبل وأثناء كتابة أي كود لحماية معمارية النظام وضمان أفضل جودة وموثوقية:

## 1. التوثيق أولاً (Documentation First)

- **لا تعتمد على التخمين.** اقرأ دائماً التوثيقات الرسمية المتوفرة في المشروع (مثل مجلد `AI_Docs_Arabic/`) وأي توثيقات تخص الإطار المستخدم (فريم ورك) قبل اقتراح أي حلول.
- إذا لم تكن متأكداً من طريقة تطبيق مكتبة بعينها، ابحث في ملفات المشروع أولاً لرؤية الأمثلة الحية وكيف تم تطبيقها سابقاً.

## 2. التطوير الموجه بالمواصفات (Spec-Driven Development)

تجنب كتابة مئات الأسطر دفعة واحدة بصورة عشوائية (Vibe Coding). عند البدء في ميزة جديدة، اتبع دورة حياة تطوير تعتمد على إنشاء وقراءة الملفات التالية:

1. **المتطلبات (`requirements.md`):** تحديد ما يجب إنجازه بدقة وشروط العمل.
2. **التصميم (`design.md`):** تحديد الهيكلية، والملفات المراد إنشاؤها أو تعديلها.
3. **المهام (`tasks.md`):** تقسيم العمل إلى نقاط بسيطة (Checklist).
4. **التنفيذ:** كتابة الكود لكل مهمة على حدة، وتحديث قائمة المهام.

## 3. مبادئ هندسة البرمجيات (Software Engineering Principles)

- **DRY (لا تكرر نفسك):** استخرج المنطق المكرر في دوال أو مكونات مشتركة قابلة لإعادة الاستخدام.
- **SRP (مسؤولية واحدة):** كل فئة، دالة، أو ملف يجب أن يكون له سبب واحد للتغيير (وظيفة واحدة).
- **التماسك وفك الارتباط (High Cohesion, Low Coupling):** اجعل المكونات مستقلة قدر الإمكان وقلل من التبعيات بينها.
- **YAGNI (لن تحتاج إليها):** لا تُعقد الكود بميزات أو تصاميم استباقية لم تُطلب في المتطلبات.

## 4. خطوة التحقق والضمان (Validation Step)

لا تعتبر المهمة منتهية بمجرد كتابة الكود. يجب عليك التأكد من:

- استقرار النظام وعدم وجود أخطاء في المحلل النحوي (`Analyzer Warnings/Errors`).
- التوافق الكامل مع قواعد التسمية (Naming Conventions) لباقي المشروع (مثل استخدام CamelCase للمتغيرات و PascalCase للواجهات).
- ضمان وجود **حواجز حماية (Guardrails)** (مثل التحقق من صحة البيانات Validation، أو طلب تدخل بشري عبر حوار في واجهة المستخدم في حال التضارب) خاصة عند استخدام الذكاء الاصطناعي كميزة في التطبيق.

## 5. استخدام أدوات وكيل الذكاء الاصطناعي (MCP & Agent Tools)

- **البحث أولاً:** استخدم أدوات مثل `grep_search` و `find_by_name` في المشروع للبحث عن المكونات أو الدوال قبل كتابة واحدة جديدة، فلربما بُرمجت مسبقاً.
- **تحليل السياق:** استخدم أداة `view_file_outline` و`view_file` لاكتساب فهم عميق حول كيفية ارتباط الملفات ببعضها.
- **التواصل:** إذا وجدت نقصاً في المتطلبات، أو شعرت أن طلب المستخدم سيؤدي لكسر في معمارية النظام، توقف واستخدم أداة التواصل والمراجعة (`notify_user`) لطرح أسئلة توضيحية.
