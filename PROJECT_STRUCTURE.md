# هيكل مشروع تطبيق "إدارة الأمناء الذكي" (V5)

هذا الملف يوضح الهيكل التنظيمي للمشروع الحالي `qlm_guardian_app_v5`، والذي تم بناؤه باستخدام إطار العمل **Flutter**.

## نظرة عامة (Overview)

- **اسم المشروع:** `qlm_guardian_app_v5`
- **الوصف:** تطبيق إدارة الأمناء الذكي - الإصدار الخامس.
- **إصدار Flutter:** يعتمد على Flutter SDK (environment: `^3.10.8`).
- **اللغة:** Dart.

## التقنيات والمكتبات المستخدمة (Tech Stack)

يعتمد التطبيق على مجموعة من المكتبات الحديثة والقوية:

- **إدارة الحالة (State Management):** `flutter_riverpod`, `riverpod_annotation`.
- **التوجيه (Routing):** `go_router`.
- **الشبكيات (Networking):** `dio`, `connectivity_plus`.
- **قاعدة البيانات المحلية (Local Database):**
  - `drift` (SQLite) لتخزين البيانات العلائقية والمعقدة.
  - `hive` لتخزين البيانات البسيطة والمؤقتة (Caching).
- **التخزين الآمن (Secure Storage):** `flutter_secure_storage`.
- **حقن التبعيات (Dependency Injection):** `get_it`, `injectable`.
- **النماذج (Forms):** `reactive_forms`.
- **التعامل مع التواريخ:** `intl`, `hijri`.

---

## هيكل المجلدات (Directory Structure) - `/lib`

يتبع المشروع هيكلية معيارية تفصل بين الطبقات المختلفة (Core vs Features).

### 1. المجلدات الأساسية (Core) - `/lib/core`

يحتوي على الكود المشترك والخدمات الأساسية التي تستخدمها جميع أجزاء التطبيق:

- **`config`**: إعدادات التطبيق والمتغيرات البيئية.
- **`database`**: إعدادات قاعدة البيانات المحلية (Drift/Hive).
- **`di`**: إعدادات حقن التبعيات (Dependency Injection Setup).
- **`network`**: إعدادات الاتصال بالشبكة وخوادم الـ API (Dio Client).
- **`sync`**: منطق المزامنة بين التطبيق والخادم (يبدو أن هناك آلية للمزامنة offline-first).
- **`theme`**: ملفات التنسيق والسمات (Theme Data, Colors, Fonts).
- **`utils`**: أدوات مساعدة ودوال عامة.
- **`widgets`**: عناصر واجهة المستخدم المشتركة (Reusable Widgets).

### 2. الميزات (Features) - `/lib/features`

يحتوي على الميزات الوظيفية للتطبيق، حيث يتم تجميع كل ميزة في مجلد خاص بها (Domain-Driven Design تقريبي):

- **`admin`**: ميزات خاصة بمدير النظام.
- **`auth`**: المصادقة وتسجيل الدخول.
- **`dashboard`**: لوحة المعلومات وعرض الإحصائيات.
- **`debug`**: شاشات وأدوات لتصحيح الأخطاء أثناء التطوير.
- **`notifications`**: نظام الإشعارات.
- **`profile`**: إدارة الملف الشخصي للمستخدم.
- **`records`**: إدارة السجلات (ربما سجلات الأمناء).
- **`registry`**: السجل العام أو القيود.
- **`sync`**: واجهة أو منطق خاص بإدارة عملية المزامنة من منظور المستخدم.

### 3. تطبيق (App) - `/lib/app`

يبدو أن هذا المجلد يحتوي على نقطة تجميع التطبيق أو تففرع المنطق بناءً على النوع:

- **`admin`**: قد يحتوي على `MaterialApp` أو إعدادات خاصة بتطبيق المدير.
- **`guardian`**: قد يحتوي على إعدادات خاصة بتطبيق الأمين.

---

## نقاط الدخول (Entry Points)

يحتوي المشروع على عدة ملفات `main` لأغراض وبيئات مختلفة:

- **`main.dart`**: نقطة الدخول الافتراضية.
- **`main_dev.dart`**: بيئة التطوير (Development).
- **`main_prod.dart`**: بيئة الإنتاج (Production).
- **`main_web.dart`**: نسخة الويب من التطبيق.

## ملاحظات إضافية

- يعتمد المشروع على **Code Generation** بشكل كبير (بواسطة `build_runner`)، نظراً لاستخدام مكتبات مثل `riverpod_generator`, `injectable`, `drift`, `json_serializable`. يجب تشغيل أمر التوليد عند إجراء تعديلات على النماذج أو الخدمات:

  ```bash
  flutter pub run build_runner build --delete-conflicting-outputs
  ```
