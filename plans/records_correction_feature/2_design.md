# ุงูุชุตููู ุงููุนูุงุฑู ูููุฒุฉ ูุณุงุฑ ุงูุชุตุญูุญ

(Correction Path Design)

## ๐ ุงููููููุฉ ุงูุนุงูุฉ

ูุณุชูุฏ ุงูุชุตููู ุฅูู ููุฑุฉ ุนุฑุถ ูุงูุฐุฉ ููุจุซูุฉ (Dialog) ุฃู ุตูุญุฉ ุชูุงุตูู ุณุฑูุนุฉ (Bottom Sheet) ุนูุฏ ุงูููุฑ ุนูู ุงูุณุฌู ุฃู ุงูููุฏ ูู ุดุงุดุฉ `AdminRecordsScreen`. ูู ูุฐู ุงููุงูุฐุฉุ ุณูุฑู ุงููุณุชุฎุฏู ุชูุงุตูู ุงูุนูุตุฑ ูุงููุงู ูุน ุฒุฑ ููุงูุชูุงู ุฅูู "ูุถุน ุงูุชุนุฏูู" ุญูุซ ุชุชุญูู ุงูุญููู ุฅูู ุญููู ูุตูุฉ (TextFields) ูุฏููุงููููุฉ ูุงุจูุฉ ููุชุบููุฑุ ููู ุซู ุฅุฑุณุงู ุงูุชุญุฏูุซุงุช ูู API.

## ๐ ููููุงุช ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Flutter)

1. **ุดุงุดุงุช ุงูุนุฑุถ ุงูุญุงููุฉ:**
   - ุชุนุฏูู ุจุทุงูุงุช ุงูุนุฑุถ ูู `record_books_tab.dart` ู `all_entries_tab.dart` ูุชููู ูุงุจูุฉ ููููุฑ (Clickable `InkWell`/`GestureDetector`).
2. **Components ุงูุฌุฏูุฏุฉ:**
   - `RecordBookCorrectionDialog` (ุฃู ูุณุงุฑ ุฌุฏูุฏ `RecordBookDetailsScreen`): ูุนุฑุถ ุจูุงูุงุช ุงูุณุฌู ูุชูููู ุงูุชุนุฏูู (ูุซู ุชุตุญูุญ ุงูุนุงูุ ุงุณู ุงูุฃููู ุงูููุฑุชุจุทุ ุงูุญุงูุฉ).
   - `RegistryEntryCorrectionDialog` (ุฃู ูุณุงุฑ ุฌุฏูุฏ `RegistryEntryDetailsScreen`): ูุนุฑุถ ุจูุงูุงุช ุงูููุฏ ุงูุชูุตูููุฉ ูุชูููู ุงูุชุนุฏูู (ุชุตุญูุญ ุฃุณูุงุก ุงูุฃุทุฑุงูุ ุงูุชูุงุฑูุฎุ ุงูุฑุณูู).
3. **ุทุจูุฉ ุงูุจูุงูุงุช (Data Layer):**
   - ุชุนุฏูู ุงูู Repositories ุงูุญุงููุฉ (ูุซู `RecordBooksRepository` ู `AllEntriesRepository`) ุจุฅุถุงูุฉ ุฏุงูุชู `updateRecordBook(id, data)` ู `updateRegistryEntry(id, data)`.
4. **ุทุจูุฉ ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management):**
   - ุงุณุชุฎุฏุงู ุฏูุงู `notifier` ูู Riverpod (ูุซู `ref.read(allEntriesProvider.notifier).updateEntry(...)`) ูุชุญุฏูุซ ุงูุนูุตุฑ ูุญููุงู ุฃู ุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก `fetchEntries` ูุชุญุฏูุซ ุงููุงุฆูุฉ ุฏูู ููุฏุงู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุชุจููุจุงุช.

## โ๏ธ ููููุงุช ุงูุฎูููุฉ (Laravel Backend)

1. **ุงูู Endpoints ุงููุญุชูู ุงูุงุญุชูุงุฌ ููุง:**
   - `PUT /api/admin/record-books/{id}` (ุฃู ูุง ุดุงุจููุงุ ูุฌุจ ุชููุฏ ุงูู Routes).
   - `PUT /api/admin/registry-entries/{id}`.
   - ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ ุจุงููุนูุ ุณูุชู ุฅูุดุงุคูุง ูุชูุจู ุงูุฑููููุณุชุงุช ุงููุชุนููุฉ ุจุชุญุฏูุซ ุจุนุถ ุงูุฃุนูุฏุฉ.
2. **ุงูู Validation:**
   - ุงูุชุฃูุฏ ูู ุงุณุชุฎุฏุงู FormRequests ุนูู ูุงุฑูููุ ูุซู `UpdateRecordBookRequest` ู `UpdateRegistryEntryRequest` ูุชุฃููุฏ ุฃูุงู ุงูุจูุงูุงุช.

## ๐ ูุณุงุฑ ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

1. ูููุฑ ุงููุณุชุฎุฏู ุนูู "ููุฏ".
2. ุงูุชุทุจูู ูุฃุฎุฐ ุงูู `RegistryEntryModel` ูู ุงูู Provider ูููุชุญ ุงูู Dialog.
3. ูููู ุงููุณุชุฎุฏู ุจุชูุนูู ูุถุน ุงูุชุนุฏููุ ูุชุชุนุจุฃ ุงูุญููู (`TextEditingController`) ุจุงูุจูุงูุงุช ุงูุญุงููุฉ.
4. ูุบูุฑ ูููุฉ ูุนููุฉ (ูุซู `second_party_name`) ููุถุบุท "ุญูุธ".
5. ุงูุชุทุจูู ูุธูุฑ `CircularProgressIndicator` ููุฑุณู ุทูุจ `PUT/PATCH` ูุญูู ุจู `Map<String, dynamic>` ืู API.
6. ูุฑุฏ ุงูู API ุจูุฌุงุญ (`200 OK`) ูุน ุงูู Model ุงููุญุฏุซ.
7. ุงูู Provider ูู Flutter ูููู ุจุชุญุฏูุซ ุงููุงุฆูุฉุ ูุชุบูู ุงููุงูุฐุฉ ูุชุธูุฑ ุฑุณุงูุฉ (ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ).
