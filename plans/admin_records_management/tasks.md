# قائمة المهام للتنفيذ (Tasks List) - إدارة السجلات والقيود (Admin)

هذه القائمة مبنية تفصيلياً على وثيقة التصميم `design.md`، ومقسمة لمراحل تُنفذ بالترتيب المنطقي (بحيث تكون الاعتمادات الأساسية أولاً).

## المرحلة الأولى: الطبقة التحتية وقاعدة البيانات (Infrastructure & Models)

- [x] 1. مراجعة كود المزود `admin_record_books_provider.dart` لدعم تصفية "سجلاتي، سجلات الأمناء، سجلات أخرى" — تم تحديث Backend `GuardianRecordBookController.php` لدعم فلاتر `my_records`, `guardian_records`, `other_records`.
- [x] 2. إضافة دالة `compositeName` في `RecordBook` model لدعم بناء الأسماء المركبة — تم.

## المرحلة الثانية: منطق الأعمال والخدمات (Business Logic)

- [x] 3. تحديث `all_entries_tab.dart` ومزوده بإضافة فلاتر نوع الكاتب (قيود التوثيق، قيود الأمناء، قيود أخرى) ودوال `setWriterType`, `setStatus`, `clearFilters`.
- [x] 4. مراجعة `AdminRepository.getRegistryEntries` — يدعم بالفعل `writerType` و `status` و `searchQuery` وباقي الفلاتر.

## المرحلة الثالثة: واجهات المستخدم (UI/Views)

- [x] 5. تحديث شاشة السجلات `tabs/record_books_tab.dart` — تم تغيير الفلاتر إلى (الكل، سجلاتي، سجلات الأمناء، سجلات أخرى).
- [x] 6. تحديث شاشة القيود `tabs/all_entries_tab.dart` — تم إضافة التبويبات الفرعية حسب نوع الكاتب وفلاتر الحالة.
- [x] 7. إعادة بناء نموذج الإضافة `AdminAddEntryScreen` — تم إضافة قائمة منسدلة لسجل الأمين مع `compositeName`، وربط اختيار الأمين بتحميل سجلاته، واستخدام `compositeName` لسجل التوثيق.

## المرحلة الرابعة: الاختبار والمراجعة (Validation)

- [/] 8. التأكد من خلو الأكواد من الأخطاء (Analysis).
- [ ] 9. تجربة واجهة إضافة القيد والتحقق من الأسماء المركبة.
- [ ] 10. التأكد من حفظ البيانات بشكل صحيح.
