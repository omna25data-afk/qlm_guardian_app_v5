قم بإنشاء خطة لتنفيذ التحسينات التالية:

أريد ترتيب الأقسام بشكل أفضل وأكثر منطقية .. لتجنب تكرار القيود (مرة من قبل الأمين ومرة من قلم التوثيق أو الإدارة.. لذلك ستكون الأقسام بالترتيب التالي:

1. القسم الأول نوع المحرر، وبيانات الكاتب  (العقد أو الوثيقة) كما هو حاليا ولكن مع إنشاء جريد مناسب : مكون من جزأين:
الجزء الأول يخص نوع العقد:

- نوع العقد
- نوع القيد (تلقائيا ومخفي) حسب النوع المرتبط
- النوع الفرعي (إن وجد)
- النوع الفرعي2 (إن وجد)

الجزء الثاني : بيانات الكاتب والمحرر:

- نوع الكاتب:
- اسم الكاتب:
- تاريخ المحرر (هجري وميلادي)

الجزء الثالث يظهر في حال كان الكاتب أمين شرعي: تظهر الحقول التالية:

- قائمة منسدلة بالسجلات الخاصة بالكاتب الأمين والمرتبطة بنوع العقد. ويكون إسم السجل بهذه التركيبة:
(نوع السجل) + رقم السجل guardian book number + سنة استخدام السجل من خلال تاريخ المحرر بالأعلى + إسم الأمين الأول واللقب. فيصبح مثلا:
سجل قيد عقود البيع رقم (1) لسنة 1447هـ ( أحمد الحاج) .

ومن ثم الثلاثة حقول الخاصة ب:

- رقم القيد:
- رقم الصفحة:
- رقم السجل:
- تاريخ القيد في سجل الأمين (هجري وميلادي) افتراضيا وتلقائيا نفس تاريخ المحرر .. مع إمكانية التغيير في حالات نادرة.

1. القسم الثاني: بيانات القيد أو العقد أو المحرر (حسب نوع العقد) وحسب البيانات المدخلة في سجل الأمين ويظهر إشعار في حال كان القيد مقيد في سجل الأمين ويتطلب توثيق فقط .. فيتم جلب البيانات تلقائيا والانتقال إلى القسم الثالث:

2. القسم الثالث: بيانات القيد في قلم التوثيق (بالمحكمة).
يتكون هذا القسم من عدة أجزاء كالتالي:

الجزء الأول: بيانات القيد في سجل التوثيق:

- تاريخ التوثيق (هجري وميلادي):
- اسم السجل (يتم اختياره تلقائيا بناء على نوع العقد ويكون اسمه بهذه التركيبة:
(فئة ونوع السجل) + رقم السجل doc book number + سنة استخدام السجل من خلال تاريخ التوثيق بالأعلى. فيصبح مثلا:
سجل توثيق عقود البيع رقم (1) لسنة 1447هـ  .

ومن ثم الأربعة حقول الخاصة ببيانات القيد في السجل:

- رقم القيد:
- رقم الصفحة:
- رقم السجل:
- رقم البوكس:

الجزء الثاني: البيانات المالية: وتنقسم إلى ثلاثة أجزاء فرعية (الضريبة + الزكاة + رسوم التوثيق)

الجزء الفرعي الأول (بيانات الضريبة)

- مبلغ الضريبة
- رقم السند

الجزء الفرعي الثاني: (بيانات الزكاة)

- مبلغ الزكاة
- رقم السند

الجزء الفرعي الثالث: (رسوم التوثيق)
وينقسم إلى ثلاثة أقسام فرعية داخلية كالتالي:
أ- القسم الفرعي الأول: رسوم التوثيق:

- أيقونة الإعفاء من الرسوم + سبب الإعفاء (وفي حال تفعيلها لا يتم احتساب أي رسوم أو غرامات وتصبح معفاة) وفي حالة عدم تفعيلها تظهر الحقول التالية:
- رسوم (رسوم التوثيق الأساسية)
- عدد أيام التأخير (لحساب الغرامة وفقا للشروط)
- مبلغ الغرامة
- الدعم
- مبلغ الإستدامة
- أيقونات الرسوم الأخرى ( مصادقة - إنتقال - أخرى)
- الإجمالي.

ب- القسم الفرعي الثاني (قابل للطي والتوسيع): ملخص الرسوم

- إجمالي الرسوم الأساسية (رسوم + غرامة + رسوم أخرى)
- الدعم
- الإستدامة
- الإجمالي

ج- القسم الفرعي الثالث (قابل للطي والتوسيع): تفاصيل توزيع الرسوم التفصيلي للعرض فقط:

بالنسب التفصيلية كما هي موضحة في هذا النموذج

F:\herd\custom_filment\app\Filament\Entry\Resources\RegistryEntries\Schemas\RegistryEntryForm.php
